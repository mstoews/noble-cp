@if (subtype$ | async; as subtypes) {
<mat-form-field>
    <input
      matInput
      (keyup)="applyFilter($event.target.value)"
      placeholder="Filter"
    />
  </mat-form-field>
  
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
    <!-- Position Column -->
    <ng-container matColumnDef="position">
      <th mat-header-cell *matHeaderCellDef>No.</th>
      <td mat-cell *matCellDef="let element">{{element.position}}</td>
    </ng-container>
  
    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Name</th>
      <td mat-cell *matCellDef="let element">{{element.name}}</td>
    </ng-container>
  
    <!-- Weight Column -->
    <ng-container matColumnDef="weight">
      <th mat-header-cell *matHeaderCellDef>Weight</th>
      <td mat-cell *matCellDef="let element">{{element.weight}}</td>
    </ng-container>
  
    <!-- Symbol Column -->
    <ng-container matColumnDef="symbol">
      <th mat-header-cell *matHeaderCellDef>Symbol</th>
      <td mat-cell *matCellDef="let element">{{element.symbol}}</td>
    </ng-container>
  
    <!-- Symbol Column -->
    
    <ng-container matColumnDef="sub_type">
      <th mat-header-cell *matHeaderCellDef>Sub Types</th>
      <td mat-cell *matCellDef="let element">
        
            <mat-select class="text-gray-800" placeholder="Sub Type" formControlName="sub_type"
            (selectionChange)="changeSubtype($event)">
            @for (item of subtypes; track item) {
            <mat-option [value]="item.subtype"> {{ item.subtype }} </mat-option>
            }        
          </mat-select>
        
      </td>
    </ng-container>

    <ng-container matColumnDef="account">
      <th mat-header-cell *matHeaderCellDef>Sub Types</th>
      <td mat-cell *matCellDef="let element">
        <div class="flex flex-col w-[350px]">
            @if (filteredAccounts | async; as accounts ) {
      
                <mat-select [formControl]="accountCtrl" placeholder="Account" #singleSelect>
                <mat-option>
                    <ngx-mat-select-search [formControl]="accountFilterCtrl" [noEntriesFoundLabel]="'No entries found'" [placeholderLabel]="'Search'"></ngx-mat-select-search>
                </mat-option>
                @for (account of accounts; track account) {
                    <mat-option [value]="account">{{account.description}}</mat-option>
                }   
                </mat-select>
      
        }
        </div> 
    </td>   
    </ng-container>

            
  
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
  <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
  <!-- Copyright 2018 Google Inc. All Rights Reserved.
      Use of this source code is governed by an MIT-style license that
      can be found in the LICENSE file at http://angular.io/license -->
}