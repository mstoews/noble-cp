<div class="sm:hide md:visible">
<grid-menubar class="pl-5 pr-5" 
    [inTitle]="'Journal Entry'" 
    (notifyParentRefresh)="onRefresh()"
    (notifyParentAdd)="onAdd()" 
    (notifyParentDelete)="onDeleteSelection()" 
    (notifyParentUpdate)="onUpdateSelection()">
</grid-menubar>
</div>

<div class="flex flex-col min-w-0 overflow-y-auto -px-10" cdkScrollable>

    <div class="flex-auto">
        <div class="h-full border-gray-300 rounded-2xl">
            <mat-drawer class="w-full" #drawer [opened]="false" mode="push" [position]="'end'"
                [disableClose]="false">
                @if (bOpenDetail === true) {
                <journal-update 
                   [journal_id]="nJournal" 
                   [sTitle]="'Journal Entry Detail'"
                   [description]="description"
                   [transaction_date]="transaction_date"
                   [amount]="amount"
                   [details$]="details$"
                   (notifyDrawerClose)="closeDrawer()">
                </journal-update>
                }                
            </mat-drawer>
            <mat-drawer-container class="flex-col h-full">
                @defer {
                    <ng-container>
                        @if (journalHeader() !== null) {
                        <div class="flex flex-1 flex-col overflow-auto">
                            <ejs-grid  id='journal_detail'
                                  [dataSource]='journalHeader()'   
                                  allowPaging='true' 
                                  allowSorting='true'                                   
                                  showColumnMenu='true'
                                  allowEditing='true'
                                  [allowFiltering]='false'
                                  [toolbar]='toolbarOptions'
                                  [selectionOptions]="selectionOptions"                                                                       
                                  (actionBegin)="actionBegin($event)" 
                                  (actionComplete)="actionComplete($event)" 
                                  [filterSettings]='filterSettings'      
                                  [editSettings]='editSettings'    
                                  [pageSettings]='pageSettings'
                                  [searchSetting]="searchOptions" >
                                <e-columns>
                                    <e-column  field="journal_id"  headerText="ID" width="100" dataType="number" isPrimaryKey='true' textAlign="left"></e-column>
                                    <e-column  field="booked"      [displayAsCheckBox]='true' headerText="Bk" width="100" type="boolean"></e-column>                            
                                    <e-column  field="amount"      headerText="Amount" format='C2' width="150" textAlign="Right"></e-column>
                                    <e-column  field="period"      headerText="Prd" width="100" ></e-column>
                                    <e-column  field="period_year" headerText="Yr" width="100"></e-column>    
                                    <e-column  field="description" headerText="Description"></e-column>                                    
                                    <e-column  field="create_date" width='120' [format]='formatoptions' headerText="Created" type="date"></e-column>                                                        
                                    <e-column  field="create_user" width='120' headerText="User" type="string"></e-column>             
                                </e-columns>
                            </ejs-grid>
                            
                        </div>
                        }
                    </ng-container>             
                }
                @placeholder(minimum 1000ms) {
                    <div class="fixed z-[1031] -translate-x-2/4 -translate-y-2/4 left-2/4 top-2/4">
                       <mat-spinner></mat-spinner>
                    </div>
                }
            </mat-drawer-container>
        </div>
    </div>
    
</div>