<div class="h-full border-gray-300 rounded-2xl">
    <ng-container>
        <div class="flex flex-col h-full mb-2">
            @if (details$ | async; as journal_details) {
            <dx-data-grid id="journal_child_id" [wordWrapEnabled]="true" [dataSource]="journal_details"
                [showColumnLines]="true" [showRowLines]="true" [showBorders]="true" [focusedRowEnabled]="true"
                keyExpr="journal_subid" [repaintChangesOnly]="true">

                <dxi-column dataField="journal_subid" caption="ID" width="100" alignment="middle"> </dxi-column>
                <dxi-column dataField="account" width="100"> </dxi-column>
                <dxi-column dataField="child" width="100"> </dxi-column>
                <dxi-column dataField="sub_type" caption="Sub Type" width="120"> </dxi-column>
                <dxi-column dataField="description"> </dxi-column>
                <dxi-column dataField="debit" dataType="number" width="120" alignment="right"  [customizeText]="formatNumber"> </dxi-column>
                <dxi-column dataField="credit" dataType="number" alignment="right" [customizeText]="formatNumber" width="120"> </dxi-column>
                <dxi-column dataField="create_date" caption="Date" width="120"> </dxi-column>
                <dxi-column dataField="create_user" caption="User" width="100"> </dxi-column>

            </dx-data-grid>
            }
        </div>
    </ng-container>
    @if (!isModifiable) {
    <button mat-raised-button color="primary" class="mb-2 mr-1" (click)="onBook()" matTooltip="Book" aria-label="Book">
        Book
        <mat-icon [svgIcon]="'mat_outline:confirmation_number'"></mat-icon>
    </button>
    <button mat-raised-button color="primary" class="mb-2 mr-1" (click)="onAddEvidence()" matTooltip="Add Evidence"
        aria-label="Evidence">
        Evidence
        <mat-icon [svgIcon]="'heroicons_outline:document-plus'"></mat-icon>
    </button>
    <button mat-raised-button color="primary" class="mb-2" (click)="onCreateTemplate()" matTooltip="Create Template"
        aria-label="Template">
        Template
        <mat-icon [svgIcon]="'mat_outline:content_copy'"></mat-icon>
    </button>
    }
    @else {
    <mat-card>
        <div class="bg-slate-600 text-justify pt-2 text-white h-10 text-2xl m-2" mat-dialog-title>
            {{ sTitle }}
        </div>

        <div class="flex flex-col w-full text-gray-700  filter-article filter-interactive">

            <div class="flex flex-col m-1">
                <section class="flex flex-col md:flex-row">
                    <div class="flex flex-col grow">
                        <mat-form-field class="m-1 form-element grow" appearance="outline">
                            <mat-label class="ml-2 text-base dark:text-gray-100">Account Code</mat-label>
                            <input matInput placeholder="Account" formControlName="account" />
                        </mat-form-field>
                    </div>

                    <div class="flex flex-col grow">
                        <mat-form-field class="m-1 form-element grow" appearance="outline">
                            <mat-label class="ml-2 text-base dark:text-gray-100">Description</mat-label>
                            <input matInput placeholder="Description" formControlName="account" />
                        </mat-form-field>
                    </div>
                    <div class="flex flex-col grow">
                        <mat-form-field class="m-1 form-element grow" appearance="outline">
                            <mat-label class="ml-2 text-base dark:text-gray-100">Type</mat-label>
                            <input matInput placeholder="Type" formControlName="account" />
                        </mat-form-field>
                    </div>

                    <div class="flex flex-col grow">
                        <mat-form-field class="m-1 form-element grow" appearance="outline">
                            <mat-label class="ml-2 text-base dark:text-gray-100">Fund</mat-label>
                            <input matInput placeholder="Account" formControlName="account" />
                        </mat-form-field>
                    </div>
                    <div class="flex flex-col grow">
                        <mat-form-field class="m-1 form-element" appearance="outline">
                            <mat-label class="ml-2 text-base dark:text-gray-100">Amount</mat-label>
                            <input matInput placeholder="Amount" formControlName="description" />
                        </mat-form-field>
                    </div>

                </section>

                <div mat-dialog-actions>
                    <div mat-dialog-actions>
                        <button mat-raised-button color="primary" class="m-1" (click)="onUpdate($event)"
                            matTooltip="Save" aria-label="Button that displays a tooltip when focused or hovered over">
                            Update
                            <mat-icon>update</mat-icon>
                        </button>

                        <button mat-raised-button color="primary" class="m-1" (click)="onDelete($event)"
                            matTooltip="Cancel"
                            aria-label="Button that displays a tooltip when focused or hovered over">
                            Cancel
                            <mat-icon>delete</mat-icon>
                        </button>

                    </div>

                </div>
            </div>
        </div>
    </mat-card>
    } 


</div>

<!-- 
  journal_id    : number,
  journal_subid : number,
  account       : string,
  child         : string,
  sub_type      : string,
  description   : string,
  debit         : number,
  credit        : number,
  create_date   : string,
  create_user   : string 
-->